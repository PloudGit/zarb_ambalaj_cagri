<core:FragmentDefinition
    xmlns="sap.m"
    xmlns:core="sap.ui.core"
>
    <Dialog
        id="popupDialogCall"
        title="{pm>/popup/title}"
        stretchOnPhone="true"
        draggable="true"
        resizable="true"
        contentWidth="600px"
    >
        <VBox class="sapUiSmallMargin">
            <Label
                text="{i18n>termItemNum}"
                visible="{pm>/popup/fields/TermItemNum/visible}"
            />
            <Input
                value="{dm>/selectedRowCallList/Etenr}"
                editable="{pm>/popup/fields/TermItemNum/editable}"
                visible="{pm>/popup/fields/TermItemNum/visible}"
            />

            <Label
                text="{i18n>quantity}"
                visible="{pm>/popup/fields/Quantity/visible}"
            />
            <Input
                value="{path: 'dm>/selectedRowCallList/Menge',
                        formatter: '.formatters.formatDecimal'
                                            }"
                editable="{pm>/popup/fields/Quantity/editable}"
                visible="{pm>/popup/fields/Quantity/visible}"
            />

            <Label
                text="{i18n>unit}"
                visible="{pm>/popup/fields/Unit/visible}"
            />
            <Input
                value="{dm>/selectedRowCallList/Meins}"
                editable="{pm>/popup/fields/Unit/editable}"
                visible="{pm>/popup/fields/Unit/visible}"
            />

            <Label
                text="{i18n>deliveryDate}"
                visible="{pm>/popup/fields/DeliveryDate/visible}"
            />
            <DatePicker
                value="{path: 'dm>/selectedRowCallList/Eindt',
                        type: 'sap.ui.model.odata.type.DateTime',
                        formatOptions: {
                        pattern: 'dd.MM.yyyy'
                                                }
                                            }"
                displayFormat="short"
                editable="{pm>/popup/fields/DeliveryDate/editable}"
                visible="{pm>/popup/fields/DeliveryDate/visible}"
            />

            <Label
                text="{i18n>firmDeliveryDate}"
                visible="{pm>/popup/fields/FirmDelivery/visible}"
            />
            <DatePicker
                value="{ path: 'dm>/selectedRowCallList/Slfdt',
                         type: 'sap.ui.model.odata.type.DateTime',
                         formatOptions: {
                         pattern: 'dd.MM.yyyy'
                                                }
                                            }"
                displayFormat="short"
                editable="{pm>/popup/fields/FirmDelivery/editable}"
                visible="{pm>/popup/fields/FirmDelivery/visible}"
            />

            <Label
                text="{i18n>printCode}"
                visible="{pm>/popup/fields/PrintCode/visible}"
            />
            <Input
                value="{dm>/selectedRowCallList/Normt}"
                editable="{pm>/popup/fields/PrintCode/editable}"
                visible="{pm>/popup/fields/PrintCode/visible}"
            />

            <Label
                text="{i18n>reviseNote}"
                visible="{pm>/popup/fields/ReviseNote/visible}"
            />
            <TextArea
                value="{dm>/ReviseNote}"
                rows="5"
                width="100%"
                growing="true"
                editable="{pm>/popup/fields/ReviseNote/editable}"
                visible="{pm>/popup/fields/ReviseNote/visible}"
            />

            <Label
                text="{i18n>cancelNote}"
                visible="{pm>/popup/fields/CancelNote/visible}"
            />
            <TextArea
                value="{dm>/CancelNote}"
                rows="5"
                width="100%"
                growing="true"
                editable="{pm>/popup/fields/CancelNote/editable}"
                visible="{pm>/popup/fields/CancelNote/visible}"
            />
        </VBox>

        <buttons>
            <Button
                text="{i18n>btnAdd}"
                icon="sap-icon://add"
                visible="{= ${pm>/popup/action} === 'add'}"
                press=".onConfirmAdd"
                class="blueButton"
            />

            <Button
                text="{i18n>btnRevise}"
                icon="sap-icon://edit"
                visible="{= ${pm>/popup/action} === 'change'}"
                press=".onConfirmChange"
                class="orangeButton"
            />

            <Button
                text="{i18n>btnCancel}"
                icon="sap-icon://decline"
                visible="{= ${pm>/popup/action} === 'cancel'}"
                press=".onConfirmCancel"
                class="redButton"
            />

            <Button
                text="{i18n>btnClose}"
                icon="sap-icon://sys-cancel"
                class="redButton"
                press=".onClosePopup"
            />
        </buttons>
    </Dialog>
</core:FragmentDefinition>
